# ===========================================
# Price Memory 生产环境配置文件
# ===========================================

# ===========================================
# 环境配置
# ===========================================
ENV=production
DEBUG=false
LOG_LEVEL=INFO

# ===========================================
# 节点配置
# ===========================================
NODE_NAME=production-node-1
NODE_CONCURRENCY=5
AUTO_CONSUME_QUEUE=true
BROWSER_MODE=remote

# ===========================================
# 数据库配置 (Supabase)
# ===========================================
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your-service-key

# ===========================================
# 浏览器配置
# ===========================================
PLAYWRIGHT_WS_ENDPOINT=ws://playwright-browser:3000
CHROMIUM_EXECUTABLE_PATH=/usr/bin/chromium-browser
BROWSER_TIMEOUT=60000
BROWSER_HEADLESS=true

# ===========================================
# 代理配置 (可选)
# ===========================================
# PROXY_SERVER=http://proxy.example.com:8080
# PROXY_USERNAME=your_proxy_username
# PROXY_PASSWORD=your_proxy_password

# ===========================================
# SMTP配置 (用于邮件告警)
# ===========================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SMTP_FROM=Price Memory <noreply@yourcompany.com>

# ===========================================
# Webhook配置 (用于Webhook告警)
# ===========================================
ALERT_WEBHOOK_SECRET=your-webhook-secret-key

# ===========================================
# Redis配置 (可选，用于缓存)
# ===========================================
REDIS_URL=redis://redis:6379/0
REDIS_PASSWORD=your-redis-password

# ===========================================
# 前端配置
# ===========================================
VITE_API_URL=http://localhost:8000/api/v1

# ===========================================
# 监控配置
# ===========================================
ENABLE_METRICS=true
METRICS_PORT=9090

# ===========================================
# 告警配置
# ===========================================
DEFAULT_ALERT_COOLDOWN=60
MAX_ALERT_RETRIES=3
ALERT_BATCH_SIZE=10

# ===========================================
# 任务调度配置
# ===========================================
TASK_RETRY_DELAY=300
MAX_TASK_RETRIES=5
SCHEDULER_CHECK_INTERVAL=60
HEALTH_CHECK_INTERVAL=30

# ===========================================
# 数据保留配置
# ===========================================
PRICE_HISTORY_RETENTION_DAYS=365
TASK_LOG_RETENTION_DAYS=90
ALERT_EVENT_RETENTION_DAYS=180

# ===========================================
# 性能配置
# ===========================================
CONCURRENT_SCRAPERS=5
QUEUE_PROCESS_BATCH_SIZE=10
BROWSER_POOL_SIZE=3
NETWORK_TIMEOUT=30000

# ===========================================
# 安全配置
# ===========================================
API_RATE_LIMIT=100
SESSION_TIMEOUT=3600
ENCRYPTION_KEY=your-encryption-key-here

# ===========================================
# 第三方服务配置
# ===========================================
# 短信服务 (可选)
# SMS_PROVIDER=aliyun
# SMS_ACCESS_KEY=your-sms-access-key
# SMS_SECRET_KEY=your-sms-secret-key

# 邮件服务 (可选)
# MAILGUN_API_KEY=your-mailgun-api-key
# MAILGUN_DOMAIN=your-mailgun-domain

# 云存储 (可选)
# CLOUD_STORAGE_PROVIDER=aws-s3
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key
# AWS_S3_BUCKET=price-memory-bucket

# ===========================================
# 开发配置 (生产环境通常不需要)
# ===========================================
# DEBUG_MODE=false
# VERBOSE_LOGGING=false
# PROFILING_ENABLED=false

# ===========================================
# 备份配置
# ===========================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # 每天凌晨2点备份
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/app/backups

# ===========================================
# 通知配置
# ===========================================
NOTIFICATION_ENABLED=true
NOTIFICATION_CHANNELS=email,webhook
NOTIFICATION_RETRY_ATTEMPTS=3
NOTIFICATION_RETRY_DELAY=60

# ===========================================
# API配置
# ===========================================
API_VERSION=v1
API_TIMEOUT=300
API_MAX_REQUEST_SIZE=10485760  # 10MB
API_CORS_ENABLED=true
API_CORS_ORIGINS=*

# ===========================================
# 数据库连接池配置
# ===========================================
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# ===========================================
# 缓存配置
# ===========================================
CACHE_ENABLED=true
CACHE_TTL=3600
CACHE_MAX_SIZE=1000